# -*- ruby -*-

module Nokogiri
  module LibXML
    class XmlXpathContext < FFI::ManagedStruct
      @@@
      struct do |s|
        s.name "struct _xmlXPathContext"
        s.include "libxml/xpath.h"
        s.field :doc, :pointer
        s.field :node, :pointer
      end
      @@@

      def self.release ptr
        LibXML.xmlXPathFreeContext(ptr)
      end

      def node
        LibXML::XmlNode.new(self[:node])
      end

    end
  end
end
